<div class="row flex-column mt-3 mb-4">
  <img [src]="user.value?.img" width="256" height="256" class="mx-auto rounded-circle">
  <input type="file" class="file-upload" style="display: none" onchange="console.log(event.target.files)" #avatarUpload>
  <span class="mx-auto text-secondary mt-1" role="button" (click)="avatarUpload.click()"><i class="bi bi-pencil-square"></i> Edit avatar</span>
</div>
<form #nicknameForm="ngForm" (ngSubmit)="updateNickname(nicknameForm)">
  <div *ngIf="!editNickname; else editNicknameTemplate" class="row mt-3 mb-4">
    <label class="font-weight-bolder col-5">Name:</label>
    <span class="text-light col">{{user.value?.name}}</span>
    <span class="edit-span d-flex col">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-pencil-fill m-auto"
           fill="currentColor" viewBox="0 0 16 16" (click)="editNickname = true">
        <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
      </svg>
    </span>
  </div>
  <ng-template #editNicknameTemplate>
    <div class="row flex-column mt-3 mb-4 justify-content-between">
      <div class="d-flex">
        <label for="nickname" class="col-5 font-weight-bolder">Name:</label>
        <div class="col p-0">
          <ng-template #errorTip>{{nicknameForm.controls['nickname']?.errors?.['error']}}</ng-template>
          <input type="text" class="form-control input-dark" id="nickname" name="nickname" required
                 placeholder="Name" [ngModel]="user.value?.name" [ngbTooltip]="errorTip" triggers="manual"
                 tooltipClass="error-tooltip" #t="ngbTooltip">
        </div>
      </div>
      <div class="row mt-3 mb-3 offset-5">
        <button class="btn btn-success mr-1 px-4 btn-rounded" [disabled]="isValidNickname(nicknameForm)">Save</button>
        <button class="btn btn-danger ml-1 btn-rounded" (click)="editNickname = false">Cancel</button>
      </div>
    </div>
  </ng-template>

</form>

<div class="row mt-3 mb-2">
  <label class="col-5">Two Factor Authentication:</label>
  <button *ngIf="!oauthService.is2FAEnabled() && !qrCode" class="btn btn-success" (click)="showQRCode()">Enable 2FA</button>
  <button *ngIf="oauthService.is2FAEnabled()" class="btn btn-danger" (click)="remove2FA()">Remove 2FA</button>
  <div *ngIf="qrCode">
    <img src="data:image/png;base64,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">
    <input type="text" class="form-control input-dark" maxlength="6" id="code2FA" name="code"
       placeholder="6 Digit Code" #codeInput>
    <button class="btn btn-success mr-1 px-4 btn-rounded" (click)="verifyCode(codeInput.value)">Verify</button>
    <button class="btn btn-danger ml-1 btn-rounded" (click)="closeQRCode()">Cancel</button>

  </div>
</div>
