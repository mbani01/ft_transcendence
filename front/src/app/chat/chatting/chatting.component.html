<div class="container-fluid chatting-container flex-column p-0">

<!-- Header -->

  <div id="header" class="row m-0">
    <div class="back-div d-flex">
<!--      <svg id="chat-back" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 24 24">-->
<!--        <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>-->
<!--      </svg>-->
      <h3 id="chat-back" class="bi bi-arrow-left-short rounded-circle"
          (click)="back()"></h3>
    </div>
    <img width="32" height="32" class="rounded-circle mr-2 my-auto" alt="Cinque Terre" src="/assets/img.webp">
    <b class="my-auto">{{ chat?.name }}</b>
    <h5 *ngIf="!settings && chat?.isChannel" id="chat-settings" class="bi bi-gear-fill my-auto ml-auto mr-2" (click)="settings = true"></h5>
  </div>

  <ng-container *ngIf="!settings; else settingsTemplate">
<!-- Messages -->

    <div id="content" #content>
      <div class="container">
        <div class="spinner-border d-flex mx-auto" role="status" *ngIf="loading">
          <span class="sr-only">Loading...</span>
        </div>

  <!--      <ng-template #messageTemplate>-->
        <ng-container *ngFor="let message of messages; let i = index;">
          <app-date *ngIf="isLateMessage(messages[i - 1], message)" [date]="message.timestamp"></app-date>
          <app-message
            [prev]="messages[i - 1]"
            [next]="messages[i + 1]"
            [message]="message"
          ></app-message>
        </ng-container>
  <!--      </ng-template>-->
      </div>
    </div>

  <!-- Prompt -->

    <div id="prompt" class="w-100">
      <form class="row m-auto" #messageForm="ngForm" (ngSubmit)="sendMessage(messageForm)">
        <input type="text" class="form-control form-rounded col m-1" placeholder="Message" name="message" ngModel>
  <!--      <input type="submit" class="btn rounded-circle col-2">-->
        <button class="btn btn-primary rounded-circle m-1">
          <i class="bi bi-send"></i>
        </button>
      </form>
    </div>
  </ng-container>
  <ng-template #settingsTemplate>
    <chat-settings></chat-settings>
  </ng-template>
</div>
